#!/bin/bash

config=~/src/freqtrade-strategies/config.json
data_dir=~/src/freqtrade/user_data/data/binance
hyperopt=HackerNoonHyperOpt
hyperopt_loss=SharpeHyperOptLossDaily
hyperopt_path=~/src/freqtrade-strategies/hyperopts
strategy=HackerNoonStrategy
strategy_path=~/src/freqtrade-strategies/strategies
user_data_dir=~/src/freqtrade/user_data


function hyperopt() {
  freqtrade hyperopt \
    --config $config \
    --datadir $data_dir \
    --hyperopt-path $hyperopt_path \
    --hyperopt $hyperopt \
    --hyperopt-loss $hyperopt_loss \
    --strategy $strategy \
    --strategy-path $strategy_path \
    --user-data-dir $user_data_dir
}


function backtesting() {
  freqtrade backtesting \
    --config $config \
    --datadir $data_dir \
    --export t \
    --strategy $strategy \
    --strategy-path $strategy_path \
    --user-data-dir $user_data_dir
}


function trade() {
  freqtrade trade \
    --config $config \
    --datadir $data_dir \
    --strategy $strategy \
    --strategy-path $strategy_path \
    --user-data-dir $user_data_dir
}


while getopts "v:tbh" o;
do
  case "${o}" in
    v)
      # Activate e.g. a virtual env
      # Must be the first argument
      source ${OPTARG}
      ;;
    t)
      trade
      ;;
    b)
      backtesting
      ;;
    h)
      hyperopt
      ;;
  esac
done

